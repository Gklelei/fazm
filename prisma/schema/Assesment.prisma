model Assessment {
    id        String   @id @default(cuid())
    createdAt DateTime @default(now())

    athleteId String
    athlete   Athlete @relation(fields: [athleteId], references: [athleteId])

    trainingId String
    training   training @relation(fields: [trainingId], references: [id])

    coachId String
    coach   staff  @relation(fields: [coachId], references: [staffId])

    responses AssessmentResponse[]

    @@unique([athleteId, trainingId])
    @@map("assessments")
}

model AssessmentTemplateSection {
    id          String             @id @default(cuid())
    name        String
    description String?
    order       Int
    isArchived  Boolean            @default(false)
    metrics     AssessmentMetric[]
}

model AssessmentMetric {
    id         String                    @id @default(cuid())
    label      String
    sectionId  String
    isArchived Boolean                   @default(false)
    section    AssessmentTemplateSection @relation(fields: [sectionId], references: [id])
    responses  AssessmentResponse[]
}

model AssessmentResponse {
    id           String           @id @default(cuid())
    assessmentId String
    assessment   Assessment       @relation(fields: [assessmentId], references: [id])
    metricId     String
    metric       AssessmentMetric @relation(fields: [metricId], references: [id])

    grade   GradeRating
    comment String?

    @@unique([assessmentId, metricId])
}

enum GradeRating {
    BELOW_STANDARD
    NEEDS_WORK
    GOOD
    VERY_GOOD
    EXCELLENT
}
